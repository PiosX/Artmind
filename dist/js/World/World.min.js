function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var o=0;o<e.length;o++){var n=e[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,_toPropertyKey(n.key),n)}}function _createClass(t,e,o){return e&&_defineProperties(t.prototype,e),o&&_defineProperties(t,o),Object.defineProperty(t,"prototype",{writable:!1}),t}function _toPropertyKey(t){t=_toPrimitive(t,"string");return"symbol"===_typeof(t)?t:String(t)}function _toPrimitive(t,e){if("object"!==_typeof(t)||null===t)return t;var o=t[Symbol.toPrimitive];if(void 0===o)return("string"===e?String:Number)(t);o=o.call(t,e||"default");if("object"!==_typeof(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}import{Vector2}from"../../../../node_modules/three/build/three.module.js";import{createCamera}from"./components/camera.min.js";import{createCube}from"./components/cube.min.js";import{createScene}from"./components/scene.min.js";import{createControls}from"./systems/controls.min.js";import{createRenderer}from"./systems/renderer.min.js";import{Resizer}from"./systems/Resizer.min.js";import{Loop}from"./systems/Loop.min.js";import{CurtainShader}from"./components/effect.min.js";import{RGBAShader}from"./components/effect2.min.js";import{EffectComposer}from"https://cdn.skypack.dev/three@0.128.0/examples/jsm/postprocessing/EffectComposer.js";import{RenderPass}from"https://cdn.skypack.dev/three@0.128.0/examples/jsm/postprocessing/RenderPass.js";import{ShaderPass}from"https://cdn.skypack.dev/three@0.128.0/examples/jsm/postprocessing/ShaderPass.js";import{GUI}from"./../../../node_modules/dat.gui/build/dat.gui.module.js";import{gsap}from"./../../../node_modules/gsap/all.js";var renderer,scene,loop,mouse=new Vector2,target=new Vector2,windowHalf=new Vector2(window.innerWidth/2,window.innerHeight/2),camera=createCamera(),cube=createCube(),content=document.querySelectorAll(".content__subtitle"),numbers=document.querySelectorAll(".counter__text"),logoMain=document.querySelectorAll(".logo__main"),sublogo=document.querySelectorAll(".logo__main__sub"),mask=document.querySelector(".mask"),World=function(){function e(t){_classCallCheck(this,e),renderer=createRenderer(),scene=createScene(),loop=new Loop(camera,scene,renderer),t.append(renderer.domElement),this.initPost(),this.render(),cube.groups.forEach(function(t){scene.add(t)}),this.clickCounter=0,this.time=0,this.mouse=new Vector2,this.target=new Vector2,this.windowHalf=new Vector2(window.innerWidth/2,window.innerHeight/2),document.addEventListener("mousemove",this.onMouseMove,!1),this.resizer=new Resizer(t,camera,renderer,this.composer),this.settings(),this.logoAnimations()}return _createClass(e,[{key:"settings",value:function(){var e=this;this.settings={progress:0,progress1:0,runAnimation:function(){e.runAnimation()}},this.gui=new GUI,this.gui.add(this.settings,"progress1",0,1,.01).onChange(function(t){e.effectPass.uniforms.uProgress.value=t}),mask.addEventListener("mousedown",this.settings.runAnimation),this.gui.hide()}},{key:"runAnimation",value:function(){mask.style.display="none",setTimeout(function(){mask.style.display="block"},2e3),8!=this.clickCounter?this.clickCounter++:this.clickCounter=0;var t=gsap.timeline();if(0==this.clickCounter){for(var e=0;e<content.length;e++)content[e].style.opacity="0";this.conAnimation(content[0],content[8]),gsap.to(numbers[7],{opacity:0,duration:2}),gsap.to(numbers[8],{opacity:0,duration:2}),this.numberAnim(numbers[0])}1==this.clickCounter&&(this.conAnimation(content[1],content[0]),this.numberAnim(numbers[1])),2==this.clickCounter&&(this.conAnimation(content[2],content[1]),this.numberAnim(numbers[2])),3==this.clickCounter&&(this.conAnimation(content[3],content[2]),this.hideNum(numbers[0]),this.hideNum(numbers[1]),this.numberAnim(numbers[3]),gsap.to(numbers[2],{x:"-5rem",duration:2})),4==this.clickCounter&&(this.conAnimation(content[4],content[3]),gsap.fromTo(numbers[2],{x:"-5rem",duration:1},{x:"-8rem",opacity:0}),gsap.to(numbers[3],{x:"-4rem",duration:2})),5==this.clickCounter&&(this.conAnimation(content[5],content[4]),this.numberAnim(numbers[5])),6==this.clickCounter&&(this.conAnimation(content[6],content[5]),this.numberAnim(numbers[6])),7==this.clickCounter&&(this.conAnimation(content[7],content[6]),this.numberAnim(numbers[7])),8==this.clickCounter&&(this.conAnimation(content[8],content[7]),this.numberAnim(numbers[8]),this.hideNum(numbers[3]),this.hideNum(numbers[6]),this.hideNum(numbers[5]),gsap.to(numbers[7],{x:"-8rem",duration:2})),2e4==camera.position.x?t.to(camera.position,{x:0,duration:1.5,ease:"power4.inOut"}):t.to(camera.position,{x:camera.position.x+2500,duration:1.5,ease:"power4.inOut"}),t.to(this.effectPass.uniforms.uProgress,{value:1,duration:1,ease:"power3,inOut"},0),t.to(this.effectPass.uniforms.uProgress,{value:0,duration:1,ease:"power3,inOut"},1),t.to(this.effectPass1.uniforms.uProgress,{value:1,duration:1,ease:"power3,inOut"},0),t.to(this.effectPass1.uniforms.uProgress,{value:0,duration:1,ease:"power3,inOut"},1)}},{key:"logoAnimations",value:function(){logoMain.forEach(function(t){gsap.to(t,{transform:"translate(-50%,-50%) rotate(-45deg)",duration:.5,delay:2}),gsap.to(t,{transform:"translate(-50%,-50%) rotate(0)",duration:.5,delay:4}),gsap.to(t,{transform:"translate(-50%,-50%) rotate(45deg)",duration:.5,delay:6}),gsap.to(t,{transform:"translate(-50%,-50%) rotate(0)",duration:.5,delay:8})}),gsap.to(sublogo[0],{transform:"translate(-50%,-50%) rotate(-45deg)",duration:.5,delay:2}),gsap.to(sublogo[1],{transform:"translate(-50%,-50%) rotate(0)",duration:.5,delay:4}),gsap.to(sublogo[2],{transform:"translate(-50%,-50%) rotate(45deg)",duration:.5,delay:6}),sublogo.forEach(function(t){gsap.to(t,{transform:"translate(-50%,-50%) rotate(0)",duration:.5,delay:8})}),setInterval(function(){logoMain.forEach(function(t){gsap.to(t,{transform:"translate(-50%,-50%) rotate(-45deg)",duration:.5,delay:2}),gsap.to(t,{transform:"translate(-50%,-50%) rotate(0)",duration:.5,delay:4}),gsap.to(t,{transform:"translate(-50%,-50%) rotate(45deg)",duration:.5,delay:6}),gsap.to(t,{transform:"translate(-50%,-50%) rotate(0)",duration:.5,delay:8.5})}),gsap.to(sublogo[0],{transform:"translate(-50%,-50%) rotate(-45deg)",duration:.5,delay:2}),gsap.to(sublogo[1],{transform:"translate(-50%,-50%) rotate(0)",duration:.5,delay:4}),gsap.to(sublogo[2],{transform:"translate(-50%,-50%) rotate(45deg)",duration:.5,delay:6}),sublogo.forEach(function(t){gsap.to(t,{transform:"translate(-50%,-50%) rotate(0)",duration:.5,delay:8.5})})},9e3)}},{key:"conAnimation",value:function(t,e){t.style.display="block",e.style.display="none",e.style.opacity="0",gsap.timeline().to(t,{opacity:1,duration:2})}},{key:"numberAnim",value:function(t){gsap.fromTo(t,{opacity:0,x:"20rem"},{opacity:1,x:"0",duration:2})}},{key:"hideNum",value:function(t){gsap.fromTo(t,{opacity:1,x:"0"},{opacity:0,x:"-8rem",duration:2})}},{key:"initPost",value:function(){this.composer=new EffectComposer(renderer);var t=new RenderPass(scene,camera);this.composer.addPass(t),this.effectPass=new ShaderPass(CurtainShader),this.composer.addPass(this.effectPass),this.effectPass1=new ShaderPass(RGBAShader),this.composer.addPass(this.effectPass1)}},{key:"onMouseMove",value:function(t){mouse.x=t.clientX-windowHalf.x,mouse.y=t.clientY-windowHalf.x}},{key:"render",value:function(){var t=this;requestAnimationFrame(this.render.bind(this)),this.time+=.05,this.oscilator=.5*Math.sin(.1*this.time)+.5,renderer.setAnimationLoop(function(){cube.groups.forEach(function(t){target.x=15e-5*(1-mouse.x),target.y=15e-5*(-500-mouse.y),t.rotation.x+=.05*(target.y-t.rotation.x),t.rotation.y+=.05*(target.x-t.rotation.y)}),t.composer.render()})}},{key:"start",value:function(){loop.start()}},{key:"stop",value:function(){loop.stop()}}]),e}();export{World};
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIldvcmxkL1dvcmxkLmpzIl0sIm5hbWVzIjpbIlZlY3RvcjIiLCJjcmVhdGVDYW1lcmEiLCJjcmVhdGVDdWJlIiwiY3JlYXRlU2NlbmUiLCJjcmVhdGVDb250cm9scyIsImNyZWF0ZVJlbmRlcmVyIiwiUmVzaXplciIsIkxvb3AiLCJDdXJ0YWluU2hhZGVyIiwiRWZmZWN0Q29tcG9zZXIiLCJyZW5kZXJlciIsInNjZW5lIiwibG9vcCIsIndpbmRvdyIsImlubmVyV2lkdGgiLCJpbm5lckhlaWdodCIsIm1vdXNlIiwidGFyZ2V0IiwiY2FtZXJhIiwiY3ViZSIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJjb250ZW50IiwiZG9jdW1lbnQiLCJudW1iZXJzIiwibG9nb01haW4iLCJtYXNrIiwiV29ybGQiLCJjb250YWluZXIiLCJfY2xhc3NDYWxsQ2hlY2siLCJ0aGlzIiwiZG9tRWxlbWVudCIsImdyb3VwcyIsImluaXRQb3N0IiwiaXRlbSIsInJlbmRlciIsInRpbWUiLCJ3aW5kb3dIYWxmIiwic2V0dGluZ3MiLCJvbk1vdXNlTW92ZSIsInJlc2l6ZXIiLCJsb2dvQW5pbWF0aW9ucyIsImNvbXBvc2VyIiwiX2NyZWF0ZUNsYXNzIiwia2V5IiwidmFsdWUiLCJ0aGF0IiwicHJvZ3Jlc3MiLCJwcm9ncmVzczEiLCJydW5BbmltYXRpb24iLCJfdGhpcyIsImd1aSIsImFkZCIsImVmZmVjdFBhc3MiLCJ1bmlmb3JtcyIsInZhbCIsIm9uQ2hhbmdlIiwidVByb2dyZXNzIiwiYWRkRXZlbnRMaXN0ZW5lciIsImhpZGUiLCJzdHlsZSIsImRpc3BsYXkiLCJzZXRUaW1lb3V0IiwiY2xpY2tDb3VudGVyIiwidGwiLCJnc2FwIiwidGltZWxpbmUiLCJpIiwib3BhY2l0eSIsImxlbmd0aCIsImNvbkFuaW1hdGlvbiIsInRvIiwiZHVyYXRpb24iLCJudW1iZXJBbmltIiwiaGlkZU51bSIsIngiLCJlYXNlIiwiZWZmZWN0UGFzczEiLCJ0cmFuc2Zvcm0iLCJsb2dvIiwiZGVsYXkiLCJzdWJsb2dvIiwic2V0SW50ZXJ2YWwiLCJmb3JFYWNoIiwiaXRlbU91dCIsImZyb21UbyIsIlJlbmRlclBhc3MiLCJhZGRQYXNzIiwicmVuZGVyUGFzcyIsIlNoYWRlclBhc3MiLCJSR0JBU2hhZGVyIiwieSIsIl90aGlzMiIsInJlcXVlc3RBbmltYXRpb25GcmFtZSIsImJpbmQiLCJldmVudCIsImNsaWVudFgiLCJzZXRBbmltYXRpb25Mb29wIiwicm90YXRpb24iLCJzdGFydCIsInN0b3AiXSwibWFwcGluZ3MiOiJxakNBQVNBLE9BQXFFLEtBQXRELDhEQUNmQyxZQUFnRCxLQUE1QixvQ0FDcEJDLFVBQTRDLEtBQTFCLGtDQUNsQkMsV0FBOEMsS0FBM0IsbUNBRW5CQyxjQUFpRCxLQUEzQixtQ0FMdEJKLGNBQWUsS0FBQSxtQ0FDZkMsT0FBb0IsS0FBUixrQ0FDWkMsSUFBa0IsS0FBUiwrQkFDVkMsYUFBOEMsS0FBM0Isb0NBRW5CQyxVQUFzQixLQUFSLHFDQUNkQyxjQUFpRCxLQUEzQiw2RkFDdEJDLFVBQXlDLEtBQTFCLHlGQUNmQyxVQUFtQyxLQUF2Qix5RkFDWkMsR0FBaUQsS0FBakRBLGlFQUVBQyxJQUFzQixLQUF0QkEsc0NBRVQsSUFBQUMsU0FDQUMsTUFDQUMsS0FHSUYsTUFBUSxJQUFBVixRQUNSVyxPQUFLLElBQUFYLFFBQ0xZLFdBQUksSUFBQVosUUFBQWEsT0FBQUMsV0FBQSxFQUFBRCxPQUFBRSxZQUFBLENBQUEsRUFFSkMsT0FBUWYsYUFBYSxFQUNyQmdCLEtBQU1mLFdBQU9GLEVBRWJrQixRQUFTakIsU0FBQUEsaUJBQWMsb0JBQUEsRUFDdkJrQixRQUFPakIsU0FBWWtCLGlCQUFBLGdCQUFBLEVBRW5CQyxTQUFVQyxTQUFTRixpQkFBaUIsYUFBQSxFQUNwQ0csUUFBVUQsU0FBU0YsaUJBQWlCLGtCQUFpQixFQUNyREksS0FBQUEsU0FBV0YsY0FBU0YsT0FBaUIsRUFFckNLLE1BQU9ILFdBQWdDLFNBQUFJLEVBRWhDQyxHQUFBQyxnQkFBQUMsS0FBQUgsQ0FBQSxFQUNWaEIsU0FB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LEVBUWpDUSxNQVBBMEUsRUFBS2pELEVBQUFBLFFBQWlCTCxXQUFLZ0IsQ0FRNUIsQ0FBQyxFQUFBLENBQUFULElBQUEsU0FBQUMsTUFFRCxXQVBBLElBQUErQyxFQUFBOUQsS0FBQytELHNCQUFBL0QsS0FBQUssT0FBQTJELEtBQUFoRSxJQUFBLENBQUEsRUFVQUEsS0FWQU0sTUFFRCxJQVNDTixLQVJBYixVQUFzQyxHQUE1QjhFLEtBQU1DLElBQVUzRCxHQUFWMkQsS0FBVTNELElBQVdzQyxFQUFDLEdBVXRDaEUsU0FSRHNGLGlCQUFBLFdBQUM3RSxLQUFBWSxPQUFBbUQsUUFBQSxTQUFBakQsR0FBQWhCLE9BQUF5RCxFQUFBLE9BQUEsRUFBQTFELE1BQUEwRCxHQUFBekQsT0FFRHlFLEVBQVMsT0FBVCxDQUFBLElBQUExRSxNQUFTMEUsR0FVTnpELEVBVk1nRSxTQUFBdkIsR0FBQSxLQUFBekQsT0FBQXlFLEVBQUF6RCxFQUFBZ0UsU0FBQXZCLEdBV056QyxFQVZGMkQsU0FBQUEsR0FBQUEsS0FBc0IzRSxPQUFLaUIsRUFBTzJELEVBQUtJLFNBQU1QLEVBZTVDLENBQUMsRUFFREMsRUFBS2xELFNBUkN3RCxPQUFRLENBU2YsQ0FBQyxDQUVGLENBQUMsRUFBQSxDQUFBdEQsSUFBQSxRQUFBQyxNQUVELFdBQ0NoQyxLQUFLc0YsTUFSRixDQVNKLENBQUMsRUFBQSxDQUFBdkQsSUFBQSxPQUFBQyxNQUVELFdBQ0NoQyxLQVJBdUYsS0FBQSxDQVNELENBQUMsRUFBQSxFQUFBekUsQ0FBQSxFQUFBLFNBUkFBLEtBRUQiLCJmaWxlIjoiV29ybGQvV29ybGQubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgVmVjdG9yMiB9IGZyb20gXCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvdGhyZWUvYnVpbGQvdGhyZWUubW9kdWxlLmpzXCI7XHJcbmltcG9ydCB7IGNyZWF0ZUNhbWVyYSB9IGZyb20gXCIuL2NvbXBvbmVudHMvY2FtZXJhLm1pbi5qc1wiO1xyXG5pbXBvcnQgeyBjcmVhdGVDdWJlIH0gZnJvbSBcIi4vY29tcG9uZW50cy9jdWJlLm1pbi5qc1wiO1xyXG5pbXBvcnQgeyBjcmVhdGVTY2VuZSB9IGZyb20gXCIuL2NvbXBvbmVudHMvc2NlbmUubWluLmpzXCI7XHJcblxyXG5pbXBvcnQgeyBjcmVhdGVDb250cm9scyB9IGZyb20gXCIuL3N5c3RlbXMvY29udHJvbHMubWluLmpzXCI7XHJcbmltcG9ydCB7IGNyZWF0ZVJlbmRlcmVyIH0gZnJvbSBcIi4vc3lzdGVtcy9yZW5kZXJlci5taW4uanNcIjtcclxuaW1wb3J0IHsgUmVzaXplciB9IGZyb20gXCIuL3N5c3RlbXMvUmVzaXplci5taW4uanNcIjtcclxuaW1wb3J0IHsgTG9vcCB9IGZyb20gXCIuL3N5c3RlbXMvTG9vcC5taW4uanNcIjtcclxuaW1wb3J0IHsgQ3VydGFpblNoYWRlciB9IGZyb20gXCIuL2NvbXBvbmVudHMvZWZmZWN0Lm1pbi5qc1wiO1xyXG5pbXBvcnQgeyBSR0JBU2hhZGVyIH0gZnJvbSBcIi4vY29tcG9uZW50cy9lZmZlY3QyLm1pbi5qc1wiO1xyXG5pbXBvcnQgeyBFZmZlY3RDb21wb3NlciB9IGZyb20gXCJodHRwczovL2Nkbi5za3lwYWNrLmRldi90aHJlZUAwLjEyOC4wL2V4YW1wbGVzL2pzbS9wb3N0cHJvY2Vzc2luZy9FZmZlY3RDb21wb3Nlci5qc1wiO1xyXG5pbXBvcnQgeyBSZW5kZXJQYXNzIH0gZnJvbSBcImh0dHBzOi8vY2RuLnNreXBhY2suZGV2L3RocmVlQDAuMTI4LjAvZXhhbXBsZXMvanNtL3Bvc3Rwcm9jZXNzaW5nL1JlbmRlclBhc3MuanNcIjtcclxuaW1wb3J0IHsgU2hhZGVyUGFzcyB9IGZyb20gXCJodHRwczovL2Nkbi5za3lwYWNrLmRldi90aHJlZUAwLjEyOC4wL2V4YW1wbGVzL2pzbS9wb3N0cHJvY2Vzc2luZy9TaGFkZXJQYXNzLmpzXCI7XHJcbmltcG9ydCB7IEdVSSB9IGZyb20gXCIuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9kYXQuZ3VpL2J1aWxkL2RhdC5ndWkubW9kdWxlLmpzXCI7XHJcbi8vIGltcG9ydCB7IGdzYXAgfSBmcm9tIFwiLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvZ3NhcC9pbmRleC5qc1wiO1xyXG5pbXBvcnQgeyBnc2FwIH0gZnJvbSBcIi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL2dzYXAvYWxsLmpzXCI7XHJcblxyXG5sZXQgcmVuZGVyZXI7XHJcbmxldCBzY2VuZTtcclxubGV0IGxvb3A7XHJcblxyXG5sZXQgbW91c2UgPSBuZXcgVmVjdG9yMigpO1xyXG5sZXQgdGFyZ2V0ID0gbmV3IFZlY3RvcjIoKTtcclxubGV0IHdpbmRvd0hhbGYgPSBuZXcgVmVjdG9yMih3aW5kb3cuaW5uZXJXaWR0aCAvIDIsIHdpbmRvdy5pbm5lckhlaWdodCAvIDIpO1xyXG5sZXQgY2FtZXJhID0gY3JlYXRlQ2FtZXJhKCk7XHJcbmxldCBjdWJlID0gY3JlYXRlQ3ViZSgpO1xyXG5cclxubGV0IGNvbnRlbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLmNvbnRlbnRfX3N1YnRpdGxlXCIpO1xyXG5sZXQgbnVtYmVycyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIuY291bnRlcl9fdGV4dFwiKTtcclxubGV0IGxvZ29NYWluID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5sb2dvX19tYWluXCIpO1xyXG5sZXQgc3VibG9nbyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIubG9nb19fbWFpbl9fc3ViXCIpO1xyXG5sZXQgbWFzayA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubWFza1wiKTtcclxuXHJcbmNsYXNzIFdvcmxkIHtcclxuXHRjb25zdHJ1Y3Rvcihjb250YWluZXIpIHtcclxuXHRcdHJlbmRlcmVyID0gY3JlYXRlUmVuZGVyZXIoKTtcclxuXHRcdHNjZW5lID0gY3JlYXRlU2NlbmUoKTtcclxuXHRcdGxvb3AgPSBuZXcgTG9vcChjYW1lcmEsIHNjZW5lLCByZW5kZXJlcik7XHJcblx0XHRjb250YWluZXIuYXBwZW5kKHJlbmRlcmVyLmRvbUVsZW1lbnQpO1xyXG5cdFx0dGhpcy5pbml0UG9zdCgpO1xyXG5cdFx0dGhpcy5yZW5kZXIoKTtcclxuXHRcdGN1YmUuZ3JvdXBzLmZvckVhY2goKGl0ZW0pID0+IHtcclxuXHRcdFx0c2NlbmUuYWRkKGl0ZW0pO1xyXG5cdFx0fSk7XHJcblx0XHR0aGlzLmNsaWNrQ291bnRlciA9IDA7XHJcblx0XHR0aGlzLnRpbWUgPSAwO1xyXG5cclxuXHRcdC8vIGNvbnN0IGNvbnRyb2xzID0gY3JlYXRlQ29udHJvbHMoY2FtZXJhLCByZW5kZXJlci5kb21FbGVtZW50KTtcclxuXHRcdC8vIGxvb3AudXBkYXRhYmxlcy5wdXNoKGNvbnRyb2xzKTtcclxuXHJcblx0XHR0aGlzLm1vdXNlID0gbmV3IFZlY3RvcjIoKTtcclxuXHRcdHRoaXMudGFyZ2V0ID0gbmV3IFZlY3RvcjIoKTtcclxuXHRcdHRoaXMud2luZG93SGFsZiA9IG5ldyBWZWN0b3IyKFxyXG5cdFx0XHR3aW5kb3cuaW5uZXJXaWR0aCAvIDIsXHJcblx0XHRcdHdpbmRvdy5pbm5lckhlaWdodCAvIDJcclxuXHRcdCk7XHJcblxyXG5cdFx0ZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlbW92ZVwiLCB0aGlzLm9uTW91c2VNb3ZlLCBmYWxzZSk7XHJcblx0XHR0aGlzLnJlc2l6ZXIgPSBuZXcgUmVzaXplcihjb250YWluZXIsIGNhbWVyYSwgcmVuZGVyZXIsIHRoaXMuY29tcG9zZXIpO1xyXG5cclxuXHRcdHRoaXMuc2V0dGluZ3MoKTtcclxuXHRcdHRoaXMubG9nb0FuaW1hdGlvbnMoKTtcclxuXHR9XHJcblxyXG5cdHNldHRpbmdzKCkge1xyXG5cdFx0bGV0IHRoYXQgPSB0aGlzO1xyXG5cdFx0dGhpcy5zZXR0aW5ncyA9IHtcclxuXHRcdFx0cHJvZ3Jlc3M6IDAsXHJcblx0XHRcdHByb2dyZXNzMTogMCxcclxuXHRcdFx0cnVuQW5pbWF0aW9uOiAoKSA9PiB7XHJcblx0XHRcdFx0dGhpcy5ydW5BbmltYXRpb24oKTtcclxuXHRcdFx0fSxcclxuXHRcdH07XHJcblx0XHR0aGlzLmd1aSA9IG5ldyBHVUkoKTtcclxuXHRcdHRoaXMuZ3VpLmFkZCh0aGlzLnNldHRpbmdzLCBcInByb2dyZXNzMVwiLCAwLCAxLCAwLjAxKS5vbkNoYW5nZSgodmFsKSA9PiB7XHJcblx0XHRcdHRoaXMuZWZmZWN0UGFzcy51bmlmb3Jtcy51UHJvZ3Jlc3MudmFsdWUgPSB2YWw7XHJcblx0XHR9KTtcclxuXHRcdG1hc2suYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlZG93blwiLCB0aGlzLnNldHRpbmdzLnJ1bkFuaW1hdGlvbik7XHJcblx0XHR0aGlzLmd1aS5oaWRlKCk7XHJcblx0fVxyXG5cclxuXHRydW5BbmltYXRpb24oKSB7XHJcblx0XHRtYXNrLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcclxuXHRcdHNldFRpbWVvdXQoKCkgPT4ge1xyXG5cdFx0XHRtYXNrLnN0eWxlLmRpc3BsYXkgPSBcImJsb2NrXCI7XHJcblx0XHR9LCAyMDAwKTtcclxuXHJcblx0XHRpZiAodGhpcy5jbGlja0NvdW50ZXIgIT0gOCkge1xyXG5cdFx0XHR0aGlzLmNsaWNrQ291bnRlcisrO1xyXG5cdFx0fSBlbHNlIHtcclxuXHRcdFx0dGhpcy5jbGlja0NvdW50ZXIgPSAwO1xyXG5cdFx0fVxyXG5cclxuXHRcdGxldCB0bCA9IGdzYXAudGltZWxpbmUoKTtcclxuXHRcdGlmICh0aGlzLmNsaWNrQ291bnRlciA9PSAwKSB7XHJcblx0XHRcdGZvciAobGV0IGkgPSAwOyBpIDwgY29udGVudC5sZW5ndGg7IGkrKykge1xyXG5cdFx0XHRcdGNvbnRlbnRbaV0uc3R5bGUub3BhY2l0eSA9IFwiMFwiO1xyXG5cdFx0XHR9XHJcblx0XHRcdHRoaXMuY29uQW5pbWF0aW9uKGNvbnRlbnRbMF0sIGNvbnRlbnRbOF0pO1xyXG5cdFx0XHRnc2FwLnRvKG51bWJlcnNbN10sIHsgb3BhY2l0eTogMCwgZHVyYXRpb246IDIgfSk7XHJcblx0XHRcdGdzYXAudG8obnVtYmVyc1s4XSwgeyBvcGFjaXR5OiAwLCBkdXJhdGlvbjogMiB9KTtcclxuXHRcdFx0dGhpcy5udW1iZXJBbmltKG51bWJlcnNbMF0pO1xyXG5cdFx0fVxyXG5cdFx0aWYgKHRoaXMuY2xpY2tDb3VudGVyID09IDEpIHtcclxuXHRcdFx0dGhpcy5jb25BbmltYXRpb24oY29udGVudFsxXSwgY29udGVudFswXSk7XHJcblx0XHRcdHRoaXMubnVtYmVyQW5pbShudW1iZXJzWzFdKTtcclxuXHRcdH1cclxuXHRcdGlmICh0aGlzLmNsaWNrQ291bnRlciA9PSAyKSB7XHJcblx0XHRcdHRoaXMuY29uQW5pbWF0aW9uKGNvbnRlbnRbMl0sIGNvbnRlbnRbMV0pO1xyXG5cdFx0XHR0aGlzLm51bWJlckFuaW0obnVtYmVyc1syXSk7XHJcblx0XHR9XHJcblx0XHRpZiAodGhpcy5jbGlja0NvdW50ZXIgPT0gMykge1xyXG5cdFx0XHR0aGlzLmNvbkFuaW1hdGlvbihjb250ZW50WzNdLCBjb250ZW50WzJdKTtcclxuXHRcdFx0dGhpcy5oaWRlTnVtKG51bWJlcnNbMF0pO1xyXG5cdFx0XHR0aGlzLmhpZGVOdW0obnVtYmVyc1sxXSk7XHJcblx0XHRcdHRoaXMubnVtYmVyQW5pbShudW1iZXJzWzNdKTtcclxuXHRcdFx0Z3NhcC50byhudW1iZXJzWzJdLCB7IHg6IFwiLTVyZW1cIiwgZHVyYXRpb246IDIgfSk7XHJcblx0XHR9XHJcblx0XHRpZiAodGhpcy5jbGlja0NvdW50ZXIgPT0gNCkge1xyXG5cdFx0XHR0aGlzLmNvbkFuaW1hdGlvbihjb250ZW50WzRdLCBjb250ZW50WzNdKTtcclxuXHRcdFx0Z3NhcC5mcm9tVG8oXHJcblx0XHRcdFx0bnVtYmVyc1syXSxcclxuXHRcdFx0XHR7IHg6IFwiLTVyZW1cIiwgZHVyYXRpb246IDEgfSxcclxuXHRcdFx0XHR7IHg6IFwiLThyZW1cIiwgb3BhY2l0eTogMCB9XHJcblx0XHRcdCk7XHJcblx0XHRcdGdzYXAudG8obnVtYmVyc1szXSwgeyB4OiBcIi00cmVtXCIsIGR1cmF0aW9uOiAyIH0pO1xyXG5cdFx0fVxyXG5cdFx0aWYgKHRoaXMuY2xpY2tDb3VudGVyID09IDUpIHtcclxuXHRcdFx0dGhpcy5jb25BbmltYXRpb24oY29udGVudFs1XSwgY29udGVudFs0XSk7XHJcblx0XHRcdHRoaXMubnVtYmVyQW5pbShudW1iZXJzWzVdKTtcclxuXHRcdH1cclxuXHRcdGlmICh0aGlzLmNsaWNrQ291bnRlciA9PSA2KSB7XHJcblx0XHRcdHRoaXMuY29uQW5pbWF0aW9uKGNvbnRlbnRbNl0sIGNvbnRlbnRbNV0pO1xyXG5cdFx0XHR0aGlzLm51bWJlckFuaW0obnVtYmVyc1s2XSk7XHJcblx0XHR9XHJcblx0XHRpZiAodGhpcy5jbGlja0NvdW50ZXIgPT0gNykge1xyXG5cdFx0XHR0aGlzLmNvbkFuaW1hdGlvbihjb250ZW50WzddLCBjb250ZW50WzZdKTtcclxuXHRcdFx0dGhpcy5udW1iZXJBbmltKG51bWJlcnNbN10pO1xyXG5cdFx0fVxyXG5cdFx0aWYgKHRoaXMuY2xpY2tDb3VudGVyID09IDgpIHtcclxuXHRcdFx0dGhpcy5jb25BbmltYXRpb24oY29udGVudFs4XSwgY29udGVudFs3XSk7XHJcblx0XHRcdHRoaXMubnVtYmVyQW5pbShudW1iZXJzWzhdKTtcclxuXHRcdFx0dGhpcy5oaWRlTnVtKG51bWJlcnNbM10pO1xyXG5cdFx0XHR0aGlzLmhpZGVOdW0obnVtYmVyc1s2XSk7XHJcblx0XHRcdHRoaXMuaGlkZU51bShudW1iZXJzWzVdKTtcclxuXHRcdFx0Z3NhcC50byhudW1iZXJzWzddLCB7IHg6IFwiLThyZW1cIiwgZHVyYXRpb246IDIgfSk7XHJcblx0XHR9XHJcblxyXG5cdFx0aWYgKGNhbWVyYS5wb3NpdGlvbi54ID09IDIwMDAwKSB7XHJcblx0XHRcdHRsLnRvKGNhbWVyYS5wb3NpdGlvbiwge1xyXG5cdFx0XHRcdHg6IDAsXHJcblx0XHRcdFx0ZHVyYXRpb246IDEuNSxcclxuXHRcdFx0XHRlYXNlOiBcInBvd2VyNC5pbk91dFwiLFxyXG5cdFx0XHR9KTtcclxuXHRcdH0gZWxzZSB7XHJcblx0XHRcdHRsLnRvKGNhbWVyYS5wb3NpdGlvbiwge1xyXG5cdFx0XHRcdHg6IGNhbWVyYS5wb3NpdGlvbi54ICsgMjUwMCxcclxuXHRcdFx0XHRkdXJhdGlvbjogMS41LFxyXG5cdFx0XHRcdGVhc2U6IFwicG93ZXI0LmluT3V0XCIsXHJcblx0XHRcdH0pO1xyXG5cdFx0fVxyXG5cclxuXHRcdC8vIHRsLnRvKFxyXG5cdFx0Ly8gXHRjYW1lcmEucG9zaXRpb24sXHJcblx0XHQvLyBcdHtcclxuXHRcdC8vIFx0XHR6OiA3MDAsXHJcblx0XHQvLyBcdFx0ZHVyYXRpb246IDEsXHJcblx0XHQvLyBcdFx0ZWFzZTogXCJwb3dlcjQuaW5PdXRcIixcclxuXHRcdC8vIFx0fSxcclxuXHRcdC8vIFx0MFxyXG5cdFx0Ly8gKTtcclxuXHRcdC8vIHRsLnRvKFxyXG5cdFx0Ly8gXHRjYW1lcmEucG9zaXRpb24sXHJcblx0XHQvLyBcdHtcclxuXHRcdC8vIFx0XHR6OiA5MDAsXHJcblx0XHQvLyBcdFx0ZHVyYXRpb246IDEsXHJcblx0XHQvLyBcdFx0ZWFzZTogXCJwb3dlcjQuaW5PdXRcIixcclxuXHRcdC8vIFx0fSxcclxuXHRcdC8vIFx0MVxyXG5cdFx0Ly8gKTtcclxuXHJcblx0XHR0bC50byhcclxuXHRcdFx0dGhpcy5lZmZlY3RQYXNzLnVuaWZvcm1zLnVQcm9ncmVzcyxcclxuXHRcdFx0e1xyXG5cdFx0XHRcdHZhbHVlOiAxLFxyXG5cdFx0XHRcdGR1cmF0aW9uOiAxLFxyXG5cdFx0XHRcdGVhc2U6IFwicG93ZXIzLGluT3V0XCIsXHJcblx0XHRcdH0sXHJcblx0XHRcdDBcclxuXHRcdCk7XHJcblx0XHR0bC50byhcclxuXHRcdFx0dGhpcy5lZmZlY3RQYXNzLnVuaWZvcm1zLnVQcm9ncmVzcyxcclxuXHRcdFx0e1xyXG5cdFx0XHRcdHZhbHVlOiAwLFxyXG5cdFx0XHRcdGR1cmF0aW9uOiAxLFxyXG5cdFx0XHRcdGVhc2U6IFwicG93ZXIzLGluT3V0XCIsXHJcblx0XHRcdH0sXHJcblx0XHRcdDFcclxuXHRcdCk7XHJcblxyXG5cdFx0dGwudG8oXHJcblx0XHRcdHRoaXMuZWZmZWN0UGFzczEudW5pZm9ybXMudVByb2dyZXNzLFxyXG5cdFx0XHR7XHJcblx0XHRcdFx0dmFsdWU6IDEsXHJcblx0XHRcdFx0ZHVyYXRpb246IDEsXHJcblx0XHRcdFx0ZWFzZTogXCJwb3dlcjMsaW5PdXRcIixcclxuXHRcdFx0fSxcclxuXHRcdFx0MFxyXG5cdFx0KTtcclxuXHRcdHRsLnRvKFxyXG5cdFx0XHR0aGlzLmVmZmVjdFBhc3MxLnVuaWZvcm1zLnVQcm9ncmVzcyxcclxuXHRcdFx0e1xyXG5cdFx0XHRcdHZhbHVlOiAwLFxyXG5cdFx0XHRcdGR1cmF0aW9uOiAxLFxyXG5cdFx0XHRcdGVhc2U6IFwicG93ZXIzLGluT3V0XCIsXHJcblx0XHRcdH0sXHJcblx0XHRcdDFcclxuXHRcdCk7XHJcblx0fVxyXG5cclxuXHRsb2dvQW5pbWF0aW9ucygpIHtcclxuXHRcdGxvZ29NYWluLmZvckVhY2goKGxvZ28pID0+IHtcclxuXHRcdFx0Z3NhcC50byhsb2dvLCB7XHJcblx0XHRcdFx0dHJhbnNmb3JtOiBcInRyYW5zbGF0ZSgtNTAlLC01MCUpIHJvdGF0ZSgtNDVkZWcpXCIsXHJcblx0XHRcdFx0ZHVyYXRpb246IDAuNSxcclxuXHRcdFx0XHRkZWxheTogMixcclxuXHRcdFx0fSk7XHJcblx0XHRcdGdzYXAudG8obG9nbywge1xyXG5cdFx0XHRcdHRyYW5zZm9ybTogXCJ0cmFuc2xhdGUoLTUwJSwtNTAlKSByb3RhdGUoMClcIixcclxuXHRcdFx0XHRkdXJhdGlvbjogMC41LFxyXG5cdFx0XHRcdGRlbGF5OiA0LFxyXG5cdFx0XHR9KTtcclxuXHRcdFx0Z3NhcC50byhsb2dvLCB7XHJcblx0XHRcdFx0dHJhbnNmb3JtOiBcInRyYW5zbGF0ZSgtNTAlLC01MCUpIHJvdGF0ZSg0NWRlZylcIixcclxuXHRcdFx0XHRkdXJhdGlvbjogMC41LFxyXG5cdFx0XHRcdGRlbGF5OiA2LFxyXG5cdFx0XHR9KTtcclxuXHRcdFx0Z3NhcC50byhsb2dvLCB7XHJcblx0XHRcdFx0dHJhbnNmb3JtOiBcInRyYW5zbGF0ZSgtNTAlLC01MCUpIHJvdGF0ZSgwKVwiLFxyXG5cdFx0XHRcdGR1cmF0aW9uOiAwLjUsXHJcblx0XHRcdFx0ZGVsYXk6IDgsXHJcblx0XHRcdH0pO1xyXG5cdFx0fSk7XHJcblxyXG5cdFx0Z3NhcC50byhzdWJsb2dvWzBdLCB7XHJcblx0XHRcdHRyYW5zZm9ybTogXCJ0cmFuc2xhdGUoLTUwJSwtNTAlKSByb3RhdGUoLTQ1ZGVnKVwiLFxyXG5cdFx0XHRkdXJhdGlvbjogMC41LFxyXG5cdFx0XHRkZWxheTogMixcclxuXHRcdH0pO1xyXG5cdFx0Z3NhcC50byhzdWJsb2dvWzFdLCB7XHJcblx0XHRcdHRyYW5zZm9ybTogXCJ0cmFuc2xhdGUoLTUwJSwtNTAlKSByb3RhdGUoMClcIixcclxuXHRcdFx0ZHVyYXRpb246IDAuNSxcclxuXHRcdFx0ZGVsYXk6IDQsXHJcblx0XHR9KTtcclxuXHRcdGdzYXAudG8oc3VibG9nb1syXSwge1xyXG5cdFx0XHR0cmFuc2Zvcm06IFwidHJhbnNsYXRlKC01MCUsLTUwJSkgcm90YXRlKDQ1ZGVnKVwiLFxyXG5cdFx0XHRkdXJhdGlvbjogMC41LFxyXG5cdFx0XHRkZWxheTogNixcclxuXHRcdH0pO1xyXG5cdFx0c3VibG9nby5mb3JFYWNoKChsb2dvKSA9PiB7XHJcblx0XHRcdGdzYXAudG8obG9nbywge1xyXG5cdFx0XHRcdHRyYW5zZm9ybTogXCJ0cmFuc2xhdGUoLTUwJSwtNTAlKSByb3RhdGUoMClcIixcclxuXHRcdFx0XHRkdXJhdGlvbjogMC41LFxyXG5cdFx0XHRcdGRlbGF5OiA4LFxyXG5cdFx0XHR9KTtcclxuXHRcdH0pO1xyXG5cclxuXHRcdHNldEludGVydmFsKCgpID0+IHtcclxuXHRcdFx0bG9nb01haW4uZm9yRWFjaCgobG9nbykgPT4ge1xyXG5cdFx0XHRcdGdzYXAudG8obG9nbywge1xyXG5cdFx0XHRcdFx0dHJhbnNmb3JtOiBcInRyYW5zbGF0ZSgtNTAlLC01MCUpIHJvdGF0ZSgtNDVkZWcpXCIsXHJcblx0XHRcdFx0XHRkdXJhdGlvbjogMC41LFxyXG5cdFx0XHRcdFx0ZGVsYXk6IDIsXHJcblx0XHRcdFx0fSk7XHJcblx0XHRcdFx0Z3NhcC50byhsb2dvLCB7XHJcblx0XHRcdFx0XHR0cmFuc2Zvcm06IFwidHJhbnNsYXRlKC01MCUsLTUwJSkgcm90YXRlKDApXCIsXHJcblx0XHRcdFx0XHRkdXJhdGlvbjogMC41LFxyXG5cdFx0XHRcdFx0ZGVsYXk6IDQsXHJcblx0XHRcdFx0fSk7XHJcblx0XHRcdFx0Z3NhcC50byhsb2dvLCB7XHJcblx0XHRcdFx0XHR0cmFuc2Zvcm06IFwidHJhbnNsYXRlKC01MCUsLTUwJSkgcm90YXRlKDQ1ZGVnKVwiLFxyXG5cdFx0XHRcdFx0ZHVyYXRpb246IDAuNSxcclxuXHRcdFx0XHRcdGRlbGF5OiA2LFxyXG5cdFx0XHRcdH0pO1xyXG5cdFx0XHRcdGdzYXAudG8obG9nbywge1xyXG5cdFx0XHRcdFx0dHJhbnNmb3JtOiBcInRyYW5zbGF0ZSgtNTAlLC01MCUpIHJvdGF0ZSgwKVwiLFxyXG5cdFx0XHRcdFx0ZHVyYXRpb246IDAuNSxcclxuXHRcdFx0XHRcdGRlbGF5OiA4LjUsXHJcblx0XHRcdFx0fSk7XHJcblx0XHRcdH0pO1xyXG5cdFx0XHRnc2FwLnRvKHN1YmxvZ29bMF0sIHtcclxuXHRcdFx0XHR0cmFuc2Zvcm06IFwidHJhbnNsYXRlKC01MCUsLTUwJSkgcm90YXRlKC00NWRlZylcIixcclxuXHRcdFx0XHRkdXJhdGlvbjogMC41LFxyXG5cdFx0XHRcdGRlbGF5OiAyLFxyXG5cdFx0XHR9KTtcclxuXHRcdFx0Z3NhcC50byhzdWJsb2dvWzFdLCB7XHJcblx0XHRcdFx0dHJhbnNmb3JtOiBcInRyYW5zbGF0ZSgtNTAlLC01MCUpIHJvdGF0ZSgwKVwiLFxyXG5cdFx0XHRcdGR1cmF0aW9uOiAwLjUsXHJcblx0XHRcdFx0ZGVsYXk6IDQsXHJcblx0XHRcdH0pO1xyXG5cdFx0XHRnc2FwLnRvKHN1YmxvZ29bMl0sIHtcclxuXHRcdFx0XHR0cmFuc2Zvcm06IFwidHJhbnNsYXRlKC01MCUsLTUwJSkgcm90YXRlKDQ1ZGVnKVwiLFxyXG5cdFx0XHRcdGR1cmF0aW9uOiAwLjUsXHJcblx0XHRcdFx0ZGVsYXk6IDYsXHJcblx0XHRcdH0pO1xyXG5cdFx0XHRzdWJsb2dvLmZvckVhY2goKGxvZ28pID0+IHtcclxuXHRcdFx0XHRnc2FwLnRvKGxvZ28sIHtcclxuXHRcdFx0XHRcdHRyYW5zZm9ybTogXCJ0cmFuc2xhdGUoLTUwJSwtNTAlKSByb3RhdGUoMClcIixcclxuXHRcdFx0XHRcdGR1cmF0aW9uOiAwLjUsXHJcblx0XHRcdFx0XHRkZWxheTogOC41LFxyXG5cdFx0XHRcdH0pO1xyXG5cdFx0XHR9KTtcclxuXHRcdH0sIDkwMDApO1xyXG5cdH1cclxuXHJcblx0Y29uQW5pbWF0aW9uKGl0ZW0sIGl0ZW1PdXQpIHtcclxuXHRcdGl0ZW0uc3R5bGUuZGlzcGxheSA9IFwiYmxvY2tcIjtcclxuXHRcdGl0ZW1PdXQuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xyXG5cdFx0aXRlbU91dC5zdHlsZS5vcGFjaXR5ID0gXCIwXCI7XHJcblx0XHRsZXQgdGwgPSBnc2FwLnRpbWVsaW5lKCk7XHJcblx0XHR0bC50byhpdGVtLCB7IG9wYWNpdHk6IDEsIGR1cmF0aW9uOiAyIH0pO1xyXG5cdH1cclxuXHJcblx0bnVtYmVyQW5pbSh0YXJnZXQpIHtcclxuXHRcdGdzYXAuZnJvbVRvKFxyXG5cdFx0XHR0YXJnZXQsXHJcblx0XHRcdHsgb3BhY2l0eTogMCwgeDogXCIyMHJlbVwiIH0sXHJcblx0XHRcdHsgb3BhY2l0eTogMSwgeDogXCIwXCIsIGR1cmF0aW9uOiAyIH1cclxuXHRcdCk7XHJcblx0fVxyXG5cclxuXHRoaWRlTnVtKHRhcmdldCkge1xyXG5cdFx0Z3NhcC5mcm9tVG8oXHJcblx0XHRcdHRhcmdldCxcclxuXHRcdFx0eyBvcGFjaXR5OiAxLCB4OiBcIjBcIiB9LFxyXG5cdFx0XHR7IG9wYWNpdHk6IDAsIHg6IFwiLThyZW1cIiwgZHVyYXRpb246IDIgfVxyXG5cdFx0KTtcclxuXHR9XHJcblxyXG5cdGluaXRQb3N0KCkge1xyXG5cdFx0dGhpcy5jb21wb3NlciA9IG5ldyBFZmZlY3RDb21wb3NlcihyZW5kZXJlcik7XHJcblxyXG5cdFx0Y29uc3QgcmVuZGVyUGFzcyA9IG5ldyBSZW5kZXJQYXNzKHNjZW5lLCBjYW1lcmEpO1xyXG5cdFx0dGhpcy5jb21wb3Nlci5hZGRQYXNzKHJlbmRlclBhc3MpO1xyXG5cclxuXHRcdHRoaXMuZWZmZWN0UGFzcyA9IG5ldyBTaGFkZXJQYXNzKEN1cnRhaW5TaGFkZXIpO1xyXG5cdFx0dGhpcy5jb21wb3Nlci5hZGRQYXNzKHRoaXMuZWZmZWN0UGFzcyk7XHJcblx0XHR0aGlzLmVmZmVjdFBhc3MxID0gbmV3IFNoYWRlclBhc3MoUkdCQVNoYWRlcik7XHJcblx0XHR0aGlzLmNvbXBvc2VyLmFkZFBhc3ModGhpcy5lZmZlY3RQYXNzMSk7XHJcblx0fVxyXG5cclxuXHRvbk1vdXNlTW92ZShldmVudCkge1xyXG5cdFx0bW91c2UueCA9IGV2ZW50LmNsaWVudFggLSB3aW5kb3dIYWxmLng7XHJcblx0XHRtb3VzZS55ID0gZXZlbnQuY2xpZW50WSAtIHdpbmRvd0hhbGYueDtcclxuXHR9XHJcblxyXG5cdHJlbmRlcigpIHtcclxuXHRcdHJlcXVlc3RBbmltYXRpb25GcmFtZSh0aGlzLnJlbmRlci5iaW5kKHRoaXMpKTtcclxuXHJcblx0XHR0aGlzLnRpbWUgKz0gMC4wNTtcclxuXHRcdHRoaXMub3NjaWxhdG9yID0gTWF0aC5zaW4odGhpcy50aW1lICogMC4xKSAqIDAuNSArIDAuNTtcclxuXHJcblx0XHRyZW5kZXJlci5zZXRBbmltYXRpb25Mb29wKCgpID0+IHtcclxuXHRcdFx0Y3ViZS5ncm91cHMuZm9yRWFjaCgoaXRlbSkgPT4ge1xyXG5cdFx0XHRcdHRhcmdldC54ID0gKDEgLSBtb3VzZS54KSAqIDAuMDAwMTU7XHJcblx0XHRcdFx0dGFyZ2V0LnkgPSAoLTUwMCAtIG1vdXNlLnkpICogMC4wMDAxNTtcclxuXHRcdFx0XHRpdGVtLnJvdGF0aW9uLnggKz0gMC4wNSAqICh0YXJnZXQueSAtIGl0ZW0ucm90YXRpb24ueCk7XHJcblx0XHRcdFx0aXRlbS5yb3RhdGlvbi55ICs9IDAuMDUgKiAodGFyZ2V0LnggLSBpdGVtLnJvdGF0aW9uLnkpO1xyXG5cclxuXHRcdFx0XHQvLyBpdGVtLmNoaWxkcmVuLmZvckVhY2goKG0sIGkpID0+IHtcclxuXHRcdFx0XHQvLyBcdG0ucG9zaXRpb24ueiA9IChpICsgMSkgKiAxMDAgLSB0aGlzLm9zY2lsYXRvciAqIDIwMDtcclxuXHRcdFx0XHQvLyB9KTtcclxuXHRcdFx0fSk7XHJcblxyXG5cdFx0XHR0aGlzLmNvbXBvc2VyLnJlbmRlcigpO1xyXG5cdFx0fSk7XHJcblx0XHQvLyByZW5kZXJlci5yZW5kZXIoc2NlbmUsIGNhbWVyYSk7XHJcblx0fVxyXG5cclxuXHRzdGFydCgpIHtcclxuXHRcdGxvb3Auc3RhcnQoKTtcclxuXHR9XHJcblxyXG5cdHN0b3AoKSB7XHJcblx0XHRsb29wLnN0b3AoKTtcclxuXHR9XHJcbn1cclxuXHJcbmV4cG9ydCB7IFdvcmxkIH07XHJcbiJdfQ==
